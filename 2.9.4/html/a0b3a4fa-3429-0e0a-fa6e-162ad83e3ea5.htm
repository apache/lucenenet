<html xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Collector Class</title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="Collector class" /><meta name="System.Keywords" content="Lucene.Net.Search.Collector class" /><meta name="System.Keywords" content="Collector class, about Collector class" /><meta name="Microsoft.Help.F1" content="Lucene.Net.Search.Collector" /><meta name="Microsoft.Help.Id" content="T:Lucene.Net.Search.Collector" /><meta name="Description" content="Expert: Collectors are primarily meant to be used to gather raw results from a search, and implement sorting or custom result filtering, collation, etc. As of 2." /><meta name="Microsoft.Help.ContentType" content="Reference" /><link rel="stylesheet" type="text/css" href="../styles/Presentation.css" /><link rel="stylesheet" type="text/css" href="ms-help://Hx/HxRuntime/HxLink.css" /><script type="text/javascript" src="../scripts/EventUtilities.js"> </script><script type="text/javascript" src="../scripts/SplitScreen.js"> </script><script type="text/javascript" src="../scripts/Dropdown.js"> </script><script type="text/javascript" src="../scripts/script_manifold.js"> </script><script type="text/javascript" src="../scripts/script_feedBack.js"> </script><script type="text/javascript" src="../scripts/CheckboxMenu.js"> </script><script type="text/javascript" src="../scripts/CommonUtilities.js"> </script><meta name="container" content="Lucene.Net.Search" /><meta name="file" content="a0b3a4fa-3429-0e0a-fa6e-162ad83e3ea5" /><meta name="guid" content="a0b3a4fa-3429-0e0a-fa6e-162ad83e3ea5" /><xml><MSHelp:Attr Name="AssetID" Value="T:Lucene.Net.Search.Collector" /><MSHelp:TOCTitle Title="Collector Class" /><MSHelp:RLTitle Title="Collector Class (Lucene.Net.Search)" /><MSHelp:Keyword Index="A" Term="T:Lucene.Net.Search.Collector" /><MSHelp:Keyword Index="A" Term="frlrfLuceneNetSearchCollectorClassTopic" /><MSHelp:Keyword Index="K" Term="Collector class" /><MSHelp:Keyword Index="K" Term="Lucene.Net.Search.Collector class" /><MSHelp:Keyword Index="K" Term="Collector class, about Collector class" /><MSHelp:Keyword Index="F" Term="Lucene.Net.Search.Collector" /><MSHelp:Attr Name="HelpPriority" Value="2" /><MSHelp:Attr Name="APIType" Value="Managed" /><MSHelp:Attr Name="APILocation" Value="Lucene.Net.dll" /><MSHelp:Attr Name="APIName" Value="Lucene.Net.Search.Collector" /><MSHelp:Attr Name="DevLang" Value="CSharp" /><MSHelp:Attr Name="DevLang" Value="VB" /><MSHelp:Attr Name="Locale" Value="en-us" /><MSHelp:Attr Name="TopicType" Value="kbSyntax" /><MSHelp:Attr Name="TopicType" Value="apiref" /><MSHelp:Attr Name="Abstract" Value="Expert: Collectors are primarily meant to be used to gather raw results from a search, and implement sorting or custom result filtering, collation, etc. As of 2.9, this class replaces the deprecated HitCollector ..." /><MSHelp:Attr Name="AssemblyVersion" Value="2.9.4.1" /></xml></head><body><input type="hidden" id="userDataCache" class="userDataStyle" /><input type="hidden" id="hiddenScrollOffset" /><img id="collapseImage" style="display:none; height:0; width:0;" src="../icons/collapse_all.gif" alt="Collapse image" title="Collapse image" /><img id="expandImage" style="display:none; height:0; width:0;" src="../icons/expand_all.gif" alt="Expand Image" title="Expand Image" /><img id="collapseAllImage" style="display:none; height:0; width:0;" src="../icons/collapse_all.gif" /><img id="expandAllImage" style="display:none; height:0; width:0;" src="../icons/expand_all.gif" /><img id="dropDownImage" style="display:none; height:0; width:0;" src="../icons/dropdown.gif" /><img id="dropDownHoverImage" style="display:none; height:0; width:0;" src="../icons/dropdownHover.gif" /><img id="copyImage" style="display:none; height:0; width:0;" src="../icons/copycode.gif" alt="Copy image" title="Copy image" /><img id="copyHoverImage" style="display:none; height:0; width:0;" src="../icons/copycodeHighlight.gif" alt="CopyHover image" title="CopyHover image" /><div id="header"><table id="topTable" cellspacing="0" cellpadding="0"><tr><td><span onclick="ExpandCollapseAll(toggleAllImage)" style="cursor:default;" onkeypress="ExpandCollapseAll_CheckKey(toggleAllImage, event)" tabindex="0"><img ID="toggleAllImage" class="toggleAll" src="../icons/collapse_all.gif" /> <label id="collapseAllLabel" for="toggleAllImage" style="display: none;">Collapse All</label><label id="expandAllLabel" for="toggleAllImage" style="display: none;">Expand All</label> </span><span>    </span><span id="devlangsDropdown" class="filter" tabindex="0"><img id="devlangsDropdownImage" src="../icons/dropdown.gif" /> <label id="devlangsMenuAllLabel" for="devlangsDropdownImage" style="display: none;"><nobr>Code: All </nobr></label><label id="devlangsMenuMultipleLabel" for="devlangsDropdownImage" style="display: none;"><nobr>Code: Multiple </nobr></label><label id="devlangsMenuCSharpLabel" for="devlangsDropdownImage" style="display: none;"><nobr>Code: C# </nobr></label><label id="devlangsMenuVisualBasicLabel" for="devlangsDropdownImage" style="display: none;"><nobr>Code: Visual Basic </nobr></label><label id="devlangsMenuManagedCPlusPlusLabel" for="devlangsDropdownImage" style="display: none;"><nobr>Code: Visual C++ </nobr></label></span></td></tr></table><div id="devlangsMenu"><input id="CSharpCheckbox" type="checkbox" data="CSharp,cs,'persist'" value="on" onClick="SetLanguage(this)" /><label class="checkboxLabel" for="CSharpCheckbox">C#</label><br /><input id="VisualBasicCheckbox" type="checkbox" data="VisualBasic,vb,'persist'" value="on" onClick="SetLanguage(this)" /><label class="checkboxLabel" for="VisualBasicCheckbox">Visual Basic</label><br /><input id="ManagedCPlusPlusCheckbox" type="checkbox" data="ManagedCPlusPlus,cpp,'persist'" value="on" onClick="SetLanguage(this)" /><label class="checkboxLabel" for="ManagedCPlusPlusCheckbox">Visual C++</label><br /></div><table id="bottomTable" cellpadding="0" cellspacing="0"><tr id="headerTableRow1"><td align="left"><span id="runningHeaderText">Lucene.Net Class Libraries</span></td></tr><tr id="headerTableRow2"><td align="left"><span id="nsrTitle">Collector Class</span></td></tr><tr id="headerTableRow3"><td align="left"><a href="445503b4-4535-ef93-a647-7f7bbeb63f1c.htm">Members</a> <a href="#seeAlsoToggle" onclick="OpenSection(seeAlsoToggle)">See Also</a> <span id="headfeedbackarea" class="feedbackhead"><a href="javascript:SubmitFeedback('','Lucene.Net Class Libraries','','','','%0\dYour%20feedback%20is%20used%20to%20improve%20the%20documentation%20and%20the%20product.%20Your%20e-mail%20address%20will%20not%20be%20used%20for%20any%20other%20purpose%20and%20is%20disposed%20of%20after%20the%20issue%20you%20report%20is%20resolved.%20%20While%20working%20to%20resolve%20the%20issue%20that%20you%20report,%20you%20may%20be%20contacted%20via%20e-mail%20to%20get%20further%20details%20or%20clarification%20on%20the%20feedback%20you%20sent.%20After%20the%20issue%20you%20report%20has%20been%20addressed,%20you%20may%20receive%20an%20e-mail%20to%20let%20you%20know%20that%20your%20feedback%20has%20been%20addressed.%0\A%0\d','Customer%20Feedback');">Send Feedback</a></span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()" /><span style="color: DarkGray"></span><div class="summary"><p />Expert: Collectors are primarily meant to be used to
            gather raw results from a search, and implement sorting
            or custom result filtering, collation, etc. <p /><p />As of 2.9, this class replaces the deprecated
            HitCollector, and offers an API for efficient collection
            of hits across sequential {@link IndexReader}s. {@link
            IndexSearcher} advances the collector through each of the
            sub readers, in an arbitrary order. This results in a
            higher performance means of collection.<p /><p />Lucene's core collectors are derived from Collector.
            Likely your application can use one of these classes, or
            subclass {@link TopDocsCollector}, instead of
            implementing Collector directly:
            
            <ul><li>{@link TopDocsCollector} is an abstract base class
            that assumes you will retrieve the top N docs,
            according to some criteria, after collection is
            done.  </li><li>{@link TopScoreDocCollector} is a concrete subclass
            {@link TopDocsCollector} and sorts according to score +
            docID.  This is used internally by the {@link
            IndexSearcher} search methods that do not take an
            explicit {@link Sort}. It is likely the most frequently
            used collector.</li><li>{@link TopFieldCollector} subclasses {@link
            TopDocsCollector} and sorts according to a specified
            {@link Sort} object (sort by field).  This is used
            internally by the {@link IndexSearcher} search methods
            that take an explicit {@link Sort}.</li><li>{@link TimeLimitingCollector}, which wraps any other
            Collector and aborts the search if it's taken too much
            time, will subclass Collector in 3.0 (presently it
            subclasses the deprecated HitCollector).</li><li>{@link PositiveScoresOnlyCollector} wraps any other
            Collector and prevents collection of hits whose score
            is &lt;= 0.0</li></ul><p />Collector decouples the score from the collected doc:
            the score computation is skipped entirely if it's not
            needed.  Collectors that do need the score should
            implement the {@link #setScorer} method, to hold onto the
            passed {@link Scorer} instance, and call {@link
            Scorer#Score()} within the collect method to compute the
            current hit's score.  If your collector may request the
            score for a single hit multiple times, you should use
            {@link ScoreCachingWrappingScorer}. <p /><p /><b>NOTE:</b> The doc that is passed to the collect
            method is relative to the current reader. If your
            collector needs to resolve this to the docID space of the
            Multi*Reader, you must re-base it by recording the
            docBase from the most recent setNextReader call.  Here's
            a simple example showing how to collect docIDs into a
            BitSet:<p /><pre>
            Searcher searcher = new IndexSearcher(indexReader);
            final BitSet bits = new BitSet(indexReader.maxDoc());
            searcher.search(query, new Collector() {
            private int docBase;
            
            <em>// ignore scorer</em>
            public void setScorer(Scorer scorer) {
            }
            
            <em>// accept docs out of order (for a BitSet it doesn't matter)</em>
            public boolean acceptsDocsOutOfOrder() {
            return true;
            }
            
            public void collect(int doc) {
            bits.set(doc + docBase);
            }
            
            public void setNextReader(IndexReader reader, int docBase) {
            this.docBase = docBase;
            }
            });
            </pre><p />Not all collectors will need to rebase the docID.  For
            example, a collector that simply counts the total number
            of hits would skip it.<p /><p /><b>NOTE:</b> Prior to 2.9, Lucene silently filtered
            out hits with score &lt;= 0.  As of 2.9, the core Collectors
            no longer do that.  It's very unusual to have such hits
            (a negative query boost, or function query returning
            negative custom scores, could cause it to happen).  If
            you need that behavior, use {@link
            PositiveScoresOnlyCollector}.<p /><p /><b>NOTE:</b> This API is experimental and might change
            in incompatible ways in the next release.<p /></div><p /><b>Namespace:</b> <a href="5715bafd-c3a8-9ed0-225c-3c4cececbdc0.htm">Lucene.Net.Search</a><br /><b>Assembly:</b> <span sdata="assembly">Lucene.Net</span> (in Lucene.Net.dll) Version: 2.9.4.1<h1 class="heading"><span onclick="ExpandCollapse(syntaxToggle)" style="cursor:default;" onkeypress="ExpandCollapse_CheckKey(syntaxToggle, event)" tabindex="0"><img id="syntaxToggle" class="toggle" name="toggleSwitch" src="../icons/collapse_all.gif" />Syntax</span></h1><div id="syntaxSection" class="section" name="collapseableSection" style=""><div id="syntaxCodeBlocks" class="code"><span codeLanguage="CSharp"><table><tr><th>C#</th></tr><tr><td><pre xml:space="preserve"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="identifier">Collector</span></pre></td></tr></table></span><span codeLanguage="VisualBasicDeclaration"><table><tr><th>Visual Basic</th></tr><tr><td><pre xml:space="preserve"><span class="keyword">Public</span> <span class="keyword">MustInherit</span> <span class="keyword">Class</span> <span class="identifier">Collector</span></pre></td></tr></table></span><span codeLanguage="ManagedCPlusPlus"><table><tr><th>Visual C++</th></tr><tr><td><pre xml:space="preserve"><span class="keyword">public</span> <span class="keyword">ref class</span> <span class="identifier">Collector</span> <span class="keyword">abstract</span></pre></td></tr></table></span></div></div><h1 class="heading"><span onclick="ExpandCollapse(familyToggle)" style="cursor:default;" onkeypress="ExpandCollapse_CheckKey(familyToggle, event)" tabindex="0"><img id="familyToggle" class="toggle" name="toggleSwitch" src="../icons/collapse_all.gif" />Inheritance Hierarchy</span></h1><div id="familySection" class="section" name="collapseableSection" style=""><a href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" target="_blank">System<span class="languageSpecificText"><span class="cs">.</span><span class="vb">.</span><span class="cpp">::</span><span class="nu">.</span><span class="fs">.</span></span>Object</a><br />  <span class="selflink">Lucene.Net.Search<span class="languageSpecificText"><span class="cs">.</span><span class="vb">.</span><span class="cpp">::</span><span class="nu">.</span><span class="fs">.</span></span>Collector</span><br />    <a href="158e14d9-cf17-b757-a260-841bdcd40c13.htm">Lucene.Net.Search<span class="languageSpecificText"><span class="cs">.</span><span class="vb">.</span><span class="cpp">::</span><span class="nu">.</span><span class="fs">.</span></span>HitCollectorWrapper</a><br />    <a href="a672f4ab-49e2-bbca-0bd9-0acecd4f8ad1.htm">Lucene.Net.Search<span class="languageSpecificText"><span class="cs">.</span><span class="vb">.</span><span class="cpp">::</span><span class="nu">.</span><span class="fs">.</span></span>PositiveScoresOnlyCollector</a><br />    <a href="2b52cf54-e736-ee9d-08db-7682eb977107.htm">Lucene.Net.Search<span class="languageSpecificText"><span class="cs">.</span><span class="vb">.</span><span class="cpp">::</span><span class="nu">.</span><span class="fs">.</span></span>TimeLimitingCollector</a><br />    <a href="a3940450-ec1a-c984-b4ef-056bd2138b89.htm">Lucene.Net.Search<span class="languageSpecificText"><span class="cs">.</span><span class="vb">.</span><span class="cpp">::</span><span class="nu">.</span><span class="fs">.</span></span>TopDocsCollector</a><br /></div><h1 class="heading"><span onclick="ExpandCollapse(seeAlsoToggle)" style="cursor:default;" onkeypress="ExpandCollapse_CheckKey(seeAlsoToggle, event)" tabindex="0"><img id="seeAlsoToggle" class="toggle" name="toggleSwitch" src="../icons/collapse_all.gif" />See Also</span></h1><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><a href="445503b4-4535-ef93-a647-7f7bbeb63f1c.htm">Collector Members</a></div><div class="seeAlsoStyle"><a href="5715bafd-c3a8-9ed0-225c-3c4cececbdc0.htm">Lucene.Net.Search Namespace</a></div></div></div><div id="footer"><div class="footerLine"><img width="100%" height="3px" src="../icons/footer.gif" alt="Footer image" title="Footer image" /></div><A NAME="feedback"></A><span id="fb" class="feedbackcss"></span></div></div></body></html>